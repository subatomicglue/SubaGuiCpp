find_package(VulkanLoader REQUIRED)
find_package(VulkanHeaders REQUIRED)
if(APPLE)
    find_package(moltenvk REQUIRED)
    find_library(COCOA_FRAMEWORK Cocoa)
endif()


target_compile_definitions(core PUBLIC USE_VULKAN)
target_compile_definitions(core PUBLIC USE_OPENGL)


set(SOURCE_FILES
    PlatformWindow_cocoa.mm
#    vk_surface_from_native.mm
#    vk_surface_from_native.cpp
    NativeParent_gl.mm
)
add_library(platform STATIC
    ${SOURCE_FILES}
)
foreach(file ${SOURCE_FILES})
    set_source_files_properties(${file} PROPERTIES COMPILE_FLAGS "-g")
endforeach()

target_link_libraries(platform PUBLIC Vulkan::Headers)
target_link_libraries(platform PUBLIC Vulkan::Loader)

if(APPLE)
    target_link_libraries(platform PUBLIC moltenvk::moltenvk ${COCOA_FRAMEWORK})
endif()
